# new和malloc的区别

[https://www.cnblogs.com/qg-whz/p/5140930.html\#\_label1\_0](https://www.cnblogs.com/qg-whz/p/5140930.html#_label1_0)

### new是c++操作符，malloc是c标准库函数

## include

void _malloc\(size\_t size\) 该函数返回一个void_ 指针 ，指向已分配大小的内存。如果请求失败，则返回 NULL。

new操作符在生成一个对象时分两步：

* 调用operator new（）函数，在自由存储区分配内存   ==  和c标准库的malloc功能一样
* 调用构造函数初始化对象

### 分配内存位置可能不同

C++程序的内存格局通常分为四个区： 全局数据区\(data area\)，代码区\(code area\)，栈区\(stack area\)，堆区\(heap area\)\(即自由存储区\)。全局数据区存放全局变量，静态数据和常量；所有类成员函数和非成员函数代码存放在代码区；为运行函数而分配的局部变量、函数参数、返回数据、返回地址等存放在栈区；余下的空间都被称为堆区。根据这个解释，我们可以得知在类的定义时，类成员函数是被放在代码区，而类的静态成员变量在类定义时就已经在全局数据区分配了内存，因而它是属于类的。对于非静态成员变量，我们是在类的实例化过程中\(构造对象\)才在栈区或者堆区为其分配内存，是为每个对象生成一个拷贝，所以它是属于对象的。

回想一下linux内存

### 返回指针类型不同

